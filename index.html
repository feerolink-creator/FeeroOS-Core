<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>人間関係ノードマップ（家族編）</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <h1>人間関係ノードマップ（家族編）</h1>
  <div id="chart-container">
    <svg id="chart" width="800" height="600"></svg>
  </div>
  <script src="script.js"></script>

<script>
   body {
   font-family: "Helvetica", "Arial", sans-serif;
   background-color: #f9f9f9;
   color: #333;
   text-align: center;
   margin: 0;
   padding: 20px;
   }

   h1 {
     margin-bottom: 20px;
   }

   #chart-container {
     display: flex;
     justify-content: center;
     align-items: center;
   }

   #chart {
     background-color: #ffffff;
     border: 1px solid #ddd;
     box-shadow: 0 2px 4px rgba(0,0,0,0.1);
   }

   // SVG要素を取得
   const svg = document.getElementById("chart");
   const width = svg.getAttribute("width");
   const height = svg.getAttribute("height");

   // 軸の範囲
   const minX = 0;
   const maxX = 10;
   const minY = -10;
   const maxY = 10;

// データ（家族編）
   const nodes = [
     { name: "Me", distance: 0, burden: 0 },
     { name: "父", distance: 4, burden: -5 },
     { name: "母", distance: 3, burden: -3 },
     { name: "きょうだい", distance: 6, burden: 1 },
     { name: "祖母", distance: 2, burden: 2 },
     { name: "祖父", distance: 2, burden: 0 },
     { name: "友人", distance: 7, burden: 4 }
   ];

// 中心ノード
   const me = nodes[0];

// スケール計算（値をSVG座標に変換）
   function scaleX(value) {
     return (value - minX) / (maxX - minX) * (width - 100) + 50;
   }

   function scaleY(value) {
  // Yは逆方向
     return (1 - (value - minY) / (maxY - minY)) * (height - 100) + 50;
   }

// ノードを描画
   nodes.forEach((node, i) => {
     const x = scaleX(node.distance);
     const y = scaleY(node.burden);

  // 線を描く（Me以外）
     if (node.name !== "Me") {
       const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
       line.setAttribute("x1", scaleX(me.distance));
       line.setAttribute("y1", scaleY(me.burden));
       line.setAttribute("x2", x);
       line.setAttribute("y2", y);
       line.setAttribute("stroke", "#888");
       line.setAttribute("stroke-width", "2");
       svg.appendChild(line);

    // スコアラベル
       const scoreLabel = document.createElementNS("http://www.w3.org/2000/svg", "text");
       const midX = (scaleX(me.distance) + x) / 2;
       const midY = (scaleY(me.burden) + y) / 2;
       scoreLabel.setAttribute("x", midX + 5);
       scoreLabel.setAttribute("y", midY - 5);
       scoreLabel.setAttribute("font-size", "12");
       scoreLabel.setAttribute("fill", "#555");
       scoreLabel.textContent = `距離:${node.distance} 負荷:${node.burden}`;
       svg.appendChild(scoreLabel);
     }

  // ノード（円）
     const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
     circle.setAttribute("cx", x);
     circle.setAttribute("cy", y);
     circle.setAttribute("r", 20);
     circle.setAttribute("fill", node.name === "Me" ? "#4CAF50" : "#2196F3");
     svg.appendChild(circle);

  // ラベル
     const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
     label.setAttribute("x", x);
     label.setAttribute("y", y + 5);
     label.setAttribute("text-anchor", "middle");
     label.setAttribute("font-size", "14");
     label.setAttribute("fill", "#fff");
     label.textContent = node.name;
     svg.appendChild(label);
   });

// 軸ラベル
   const yAxisLabel = document.createElementNS("http://www.w3.org/2000/svg", "text");
   yAxisLabel.setAttribute("x", 10);
   yAxisLabel.setAttribute("y", 20);
   yAxisLabel.setAttribute("font-size", "12");
   yAxisLabel.textContent = "負荷（+/-）";
   svg.appendChild(yAxisLabel);

   const xAxisLabel = document.createElementNS("http://www.w3.org/2000/svg", "text");
   xAxisLabel.setAttribute("x", width - 80);
   xAxisLabel.setAttribute("y", height - 10);
   xAxisLabel.setAttribute("font-size", "12");
   xAxisLabel.textContent = "距離";
   svg.appendChild(xAxisLabel);
</script>
</body>
</html>
